

##sinanews

[预览地址]( https://mugglefighter.github.io/mini-project/news)

###懒加载原理

1. 在图片未出现在用户视野中的时候使用默认图片
2. 当图片出现在用户视野中之后使用真实的图片地址替换默认图片地址
3. 监听窗口滚动，当滚动距离加上窗口高度 === 元素距离顶部的高度时，表示出现在视野中，此时加载图片

### 瀑布流原理

1. 瀑布流布局，就是一堆等宽不等高的元素，使用绝对定位的方式，根据元素高度放入最短一列。
2. 由于元素宽度固定，根据父容器的宽度，计算一行可以放多少个元素。
3. 需要记录列高度的数组，这个数组存放元素排列后的每列的高度，列数是这个数组的长度
4. 遍历数组，找出数值最小的数组元素(列高最低)及其下标，将下一个元素放到该列，元素top=列高最低的高度，left=元素宽度*下标
5. 重复上一步操作，直到所有元素排列完成

### 实现原理

1. ajax获取数据
2. 渲染数据后第一次触发图片load事件，执行瀑布流布局
3. 滚动到底部时再次触发load事件，执行瀑布流布局
4. 窗口缩放时重新进行瀑布流布局
5. 滚动时触发懒加载
6. 对窗口滚动、resize等事件的处理程序节流，防止其频繁执行。